<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trashcons Font Test</title>
    <style>
        @font-face {
            font-family: 'trashcons';
            font-style: normal;
            font-weight: normal;
            src: url('./public/fonts/trashcons.woff') format('woff');
        }
        
        .trashcons {
            font-family: 'trashcons';
            font-style: normal;
            font-weight: normal;
            font-variant: normal;
            text-transform: none;
            line-height: 1;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-size: 32px;
            margin: 10px;
            display: inline-block;
        }
        
        .icon-enter:before { content: "\e90e"; }
        .icon-esc:before { content: "\e90f"; }
        .icon-shift:before { content: "\e90b"; }
        .icon-ctrl:before { content: "\e914"; }
        
        .test-canvas {
            border: 1px solid #ccc;
            margin: 20px;
        }
        
        .test-section {
            margin: 20px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="test-section">
        <h2>CSS Icon Test</h2>
        <p>These icons should render if the font is loaded:</p>
        <span class="trashcons icon-enter"></span>
        <span class="trashcons icon-esc"></span>
        <span class="trashcons icon-shift"></span>
        <span class="trashcons icon-ctrl"></span>
    </div>
    
    <div class="test-section">
        <h2>Direct Unicode Test</h2>
        <p>Direct unicode characters:</p>
        <span class="trashcons">&#xe90e; &#xe90f; &#xe90b; &#xe914;</span>
    </div>
    
    <div class="test-section">
        <h2>Canvas Test</h2>
        <canvas id="testCanvas" class="test-canvas" width="400" height="100"></canvas>
    </div>
    
    <div class="test-section">
        <h2>Font Loading Status</h2>
        <div id="fontStatus"></div>
    </div>
    
    <script>
        async function testFontLoading() {
            const statusDiv = document.getElementById('fontStatus');
            
            // Method 1: Check if font is available
            const fontCheck1 = document.fonts.check('12px trashcons');
            statusDiv.innerHTML += `<p>Initial font check: ${fontCheck1}</p>`;
            
            // Method 2: Load font explicitly
            try {
                const font = new FontFace('trashcons', 'url(./public/fonts/trashcons.woff)');
                const loadedFont = await font.load();
                document.fonts.add(loadedFont);
                statusDiv.innerHTML += `<p>Font loaded successfully via FontFace API</p>`;
            } catch (error) {
                statusDiv.innerHTML += `<p style="color: red;">Font loading error: ${error}</p>`;
            }
            
            // Method 3: Check again after loading
            const fontCheck2 = document.fonts.check('12px trashcons');
            statusDiv.innerHTML += `<p>After loading font check: ${fontCheck2}</p>`;
            
            // Test canvas rendering
            const canvas = document.getElementById('testCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw with trashcons font
            ctx.fillStyle = 'black';
            ctx.font = '24px trashcons';
            ctx.textBaseline = 'middle';
            ctx.fillText('Direct: \ue90e \ue90f \ue90b \ue914', 10, 25);
            
            // Draw with fallback font for comparison
            ctx.font = '24px Arial';
            ctx.fillText('Arial: Enter Esc Shift Ctrl', 10, 60);
            
            // List all loaded fonts
            const loadedFonts = [];
            for (const font of document.fonts) {
                loadedFonts.push(`${font.family} (${font.status})`);
            }
            statusDiv.innerHTML += `<p>Loaded fonts: ${loadedFonts.join(', ')}</p>`;
        }
        
        // Run tests when page loads
        window.addEventListener('load', testFontLoading);
    </script>
</body>
</html>